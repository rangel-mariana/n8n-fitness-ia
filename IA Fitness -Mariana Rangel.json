{
  "name": "IA Fitness",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.prompt_entrada }}",
        "options": {
          "systemMessage": "={{ $json.prompt_saida }}"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -928,
        352
      ],
      "id": "cc975afb-9fbd-4ab2-a7d4-317f0882fc17",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "toolDescription": "Use isto para obter informa√ß√µes sobre a tabela Documents no Supabase e fornecer An√°lise de Intelig√™ncia e Ensinar o aluno sobre Atividade Fisica",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        -576,
        944
      ],
      "id": "41c7eb97-ec08-47bb-bee5-1bf969a7d4bb",
      "name": "Supabase Vector Store1",
      "credentials": {
        "supabaseApi": {
          "id": "WLGDuqOUR5jH3XSp",
          "name": "Supabase account 2"
        }
      }
    },
    {
      "parameters": {
        "modelName": "sentence-transformers/all-mpnet-base-v2",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsHuggingFaceInference",
      "typeVersion": 1,
      "position": [
        -288,
        944
      ],
      "id": "bbb88259-2419-4bfd-8542-7f9c7c11a844",
      "name": "Embeddings HuggingFace Inference",
      "credentials": {
        "huggingFaceApi": {
          "id": "at83ctuTfy9Hwg0U",
          "name": "HuggingFaceApi account"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1fNidbDtnVn5GCePQvDY9s_Mdr7fltNOj-u8Z2ytc2cs",
          "mode": "list",
          "cachedResultName": "Respostas_Fitness",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1fNidbDtnVn5GCePQvDY9s_Mdr7fltNOj-u8Z2ytc2cs/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1515466474,
          "mode": "list",
          "cachedResultName": "Respostas ao formul√°rio 1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1fNidbDtnVn5GCePQvDY9s_Mdr7fltNOj-u8Z2ytc2cs/edit#gid=1515466474"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -1472,
        400
      ],
      "id": "926b2302-b728-41c6-8f1b-b8fd99cebf04",
      "name": "Get row(s) in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e99KlxXhF4spbtXF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        -1264,
        496
      ],
      "id": "07d8739e-cf0a-41b5-af63-be6e272cecec",
      "name": "Limit1"
    },
    {
      "parameters": {
        "mode": "insert",
        "tableName": {
          "__rl": true,
          "value": "documents",
          "mode": "list",
          "cachedResultName": "documents"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreSupabase",
      "typeVersion": 1.3,
      "position": [
        -144,
        1104
      ],
      "id": "6f1a208f-c5dd-44e2-b2a7-fe6cfdcf9ed9",
      "name": "Supabase Vector Store",
      "credentials": {
        "supabaseApi": {
          "id": "WLGDuqOUR5jH3XSp",
          "name": "Supabase account 2"
        }
      }
    },
    {
      "parameters": {
        "chunkOverlap": 100,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter",
      "typeVersion": 1,
      "position": [
        384,
        1216
      ],
      "id": "94d8cde4-1914-41b9-b5bf-9e9e17635774",
      "name": "Recursive Character Text Splitter1"
    },
    {
      "parameters": {
        "operation": "delete",
        "tableId": "documents",
        "filterType": "string",
        "filterString": "=metadata->>file_id=like.*{{ $json.file_id }}*"
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -304,
        1280
      ],
      "id": "d36efc36-ffee-454f-8d5b-dd8d7d258b68",
      "name": "Delete a row",
      "credentials": {
        "supabaseApi": {
          "id": "WLGDuqOUR5jH3XSp",
          "name": "Supabase account 2"
        }
      }
    },
    {
      "parameters": {
        "jsonMode": "expressionData",
        "jsonData": "={{ $json.text }}",
        "textSplittingMode": "custom",
        "options": {
          "metadata": {
            "metadataValues": [
              {
                "name": "file_id",
                "value": "={{ $('Search files and folders1').item.json.id }}"
              },
              {
                "name": "file_name",
                "value": "={{ $('Search files and folders1').item.json.name }}"
              }
            ]
          }
        }
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        240,
        1088
      ],
      "id": "0d48f7c8-b1d9-4555-9ae4-bc6a790d053d",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "model": "llama-3.3-70b-versatile",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGroq",
      "typeVersion": 1,
      "position": [
        -736,
        752
      ],
      "id": "7bdf9435-c02c-45b0-9a96-91313b59642e",
      "name": "Groq Chat Model",
      "credentials": {
        "groqApi": {
          "id": "R7gvEoXPcER2uojj",
          "name": "Groq account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentURL": "={{ $json.id }}",
        "actionsUi": {
          "actionFields": [
            {
              "object": "=text",
              "action": "replaceAll",
              "text": "{{PLANO_TREINO}}",
              "replaceText": "={{ $('Code in JavaScript').item.json.output }}",
              "index": 0
            }
          ]
        }
      },
      "type": "n8n-nodes-base.googleDocs",
      "typeVersion": 2,
      "position": [
        -48,
        480
      ],
      "id": "1ec8e287-3026-41e9-82da-cb94d6d4c372",
      "name": "Update a document",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "kuyjCUktCoHjrD01",
          "name": "Google Docs account"
        }
      }
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.documentId }}",
          "mode": "id"
        },
        "options": {
          "googleFileConversion": {
            "conversion": {
              "docsToFormat": "application/pdf"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        288,
        464
      ],
      "id": "27cad057-fb58-4529-9a9b-4382fb66393f",
      "name": "Download de pdf",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "WCmi9ABTkyMsk01T",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "={{ $('Limit1').item.json['E-mail'] }}",
        "subject": "=Plano de Treino ‚Äì {{ $('Limit1').item.json.Nome }}",
        "emailType": "text",
        "message": "=Ol√°, {{ $('Limit1').item.json.Nome }} ! üí™ \n\nO seu plano de treino personalizado est√° pronto! \nCom base nas suas metas e informa√ß√µes, elaboramos um treino feito sob medida para ajudar voc√™ a alcan√ßar os resultados desejados.\n\nConfira o PDF, em anexo, com todas as orienta√ß√µes detalhadas.\n\nBons treinos! \n\nEquipe IA Fitness",
        "options": {
          "attachmentsUi": {
            "attachmentsBinary": [
              {
                "property": "=data"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.2,
      "position": [
        544,
        448
      ],
      "id": "3a808aa7-1dd1-45c4-9f2f-e5b7aa47b0b7",
      "name": "Send a message",
      "webhookId": "837263bf-5126-430f-8aac-5bbd0755af40",
      "credentials": {
        "gmailOAuth2": {
          "id": "2bIYjY1mIlv818oY",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "operation": "copy",
        "fileId": {
          "__rl": true,
          "value": "1nwxvyhAcwQj8ZutFw2hkIEG7juVTyjWqwntDUD3dGOA",
          "mode": "list",
          "cachedResultName": "Template_Plano_Treino",
          "cachedResultUrl": "https://docs.google.com/document/d/1nwxvyhAcwQj8ZutFw2hkIEG7juVTyjWqwntDUD3dGOA/edit?usp=drivesdk"
        },
        "name": "=Plano de Treino - {{ $('Limit1').item.json.Nome }}",
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -368,
        416
      ],
      "id": "1926c271-3bd1-435f-8332-2036232299bd",
      "name": "Copy file",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "WCmi9ABTkyMsk01T",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.file_id }}",
          "mode": "id"
        },
        "options": {
          "binaryPropertyName": "data",
          "googleFileConversion": {
            "conversion": {
              "docsToFormat": "application/pdf"
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -240,
        1408
      ],
      "id": "6ee84663-c44d-4af5-906a-ec361ef197a1",
      "name": "Download file1",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "WCmi9ABTkyMsk01T",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "operation": "pdf",
        "options": {}
      },
      "type": "n8n-nodes-base.extractFromFile",
      "typeVersion": 1,
      "position": [
        288,
        1424
      ],
      "id": "6c51568b-be3c-4747-9cb3-64cdf01c053d",
      "name": "Extract from File2"
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "filter": {
          "folderId": {
            "__rl": true,
            "value": "1c3lPshBqI1_gXizwSJnBp__AdumPBJGg",
            "mode": "list",
            "cachedResultName": "base_conhecimento",
            "cachedResultUrl": "https://drive.google.com/drive/folders/1c3lPshBqI1_gXizwSJnBp__AdumPBJGg"
          }
        },
        "options": {
          "fields": [
            "id",
            "name",
            "mimeType",
            "webViewLink"
          ]
        }
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -976,
        1360
      ],
      "id": "c7e90c77-22d0-4e5e-88fd-8934f8e9589d",
      "name": "Search files and folders1",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "WCmi9ABTkyMsk01T",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -768,
        1360
      ],
      "id": "76a811d7-4977-46a6-ab96-72ffa67b3f12",
      "name": "Loop Over Items1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1e6a967b-9624-4dc8-91ee-84e04f550899",
              "name": "file_id",
              "value": "={{ $('Search files and folders1').item.json.id }}",
              "type": "string"
            },
            {
              "id": "3177d65a-6a96-45b1-a5b2-b9721591f8b0",
              "name": "file_name",
              "value": "={{ $('Search files and folders1').item.json.name }}",
              "type": "string"
            },
            {
              "id": "9c335ba3-c446-4809-9a4c-e3738a16f4c6",
              "name": "file_type",
              "value": "={{ $('Search files and folders1').item.json.mimeType }}",
              "type": "string"
            },
            {
              "id": "ce153085-6f2e-493b-8ec9-0a56b4fc74f1",
              "name": "file_url",
              "value": "={{ $('Search files and folders1').item.json.webViewLink }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -512,
        1408
      ],
      "id": "854234f1-87ec-4194-9fcb-6a1e787563f9",
      "name": "set files1"
    },
    {
      "parameters": {
        "jsCode": "function sanitizeText(text) {\n  return text\n    .replace(/[\\u0000-\\u001F\\u007F-\\u009F]/g, ' ')         // caracteres de controle invis√≠veis\n    .replace(/\\\\u[0-9A-Fa-f]{0,3}(?![0-9A-Fa-f])/g, '')     // unicode incompleto\n    .replace(/\\\\(?![\"\\\\/bfnrtu])/g, '')                    // barras invertidas inv√°lidas\n    .replace(/%PDF-[\\d.]+/, '')                            // assinatura do PDF\n    .replace(/\\/[A-Za-z]+/g, '')                           // palavras com /\n    .replace(/\\\\n|\\\\r|\\\\t/g, ' ')                          // escapes como string\n    .replace(/\\n|\\r|\\t/g, ' ')                             // quebras reais\n    .normalize('NFKC')                                     // normaliza√ß√£o\n    .replace(/[^\\x00-\\x7F]/g, '')                          // üî• remove qualquer Unicode n√£o-ASCII\n    .replace(/\\s+/g, ' ')                                  // espa√ßos m√∫ltiplos\n    .trim();\n}\n\nfor (const item of $input.all()) {\n  const raw = item.json.text || item.json.content || '';\n  const cleanText = sanitizeText(raw);\n\n  item.json.content = cleanText;\n\n  // Seguran√ßa extra: stringificar e depois parsear para garantir JSON v√°lido\n  try {\n    const jsonSafe = JSON.stringify({ content: cleanText });\n    const parsed = JSON.parse(jsonSafe);\n    item.json.content = parsed.content;\n  } catch (e) {\n    // fallback\n    item.json.content = cleanText;\n  }\n}\n\nreturn $input.all();\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        496,
        1424
      ],
      "id": "a441e969-222b-4982-8d80-6801d109fcdf",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "d32ce4f7-9166-4179-a227-146c215122a9",
              "name": "prompt_entrada",
              "value": "Voc√™ √© um PROFISSIONAL DE EDUCA√á√ÉO F√çSICA e PERSONAL TRAINER experiente.\n\nElabore um PLANO DE TREINO DE ATIVIDADE F√çSICA PERSONALIZADO, obedecendo rigorosamente √†s informa√ß√µes fornecidas pelo usu√°rio (dados pessoais, objetivo, frequ√™ncia semanal, prefer√™ncias e restri√ß√µes).\n\nO plano DEVE conter EXATAMENTE 12 TREINOS, distribu√≠dos de forma proporcional √† frequ√™ncia semanal informada, organizados e apresentados claramente por DIA DE TREINO, respeitando pausas adequadas entre sess√µes.\n\nUtilize prioritariamente a base t√©cnica dispon√≠vel no contexto (RAG). Recorra √† WEB apenas quando a base for insuficiente, sem contradizer ou extrapolar os dados do usu√°rio.\n\nA prescri√ß√£o deve garantir:\n- seguran√ßa articular e muscular;\n- coer√™ncia fisiol√≥gica;\n- progress√£o adequada;\n- total compatibilidade com o objetivo informado (for√ßa, hipertrofia, emagrecimento, condicionamento ou mobilidade).\n\nRespeite integralmente as prefer√™ncias e restri√ß√µes do usu√°rio.\n\nN√£o invente informa√ß√µes.\nN√£o cite fontes externas.\nN√£o explique racioc√≠nio interno.\nRetorne exclusivamente o plano final.\n",
              "type": "string"
            },
            {
              "id": "761881d7-babe-4875-876e-0743ae489e32",
              "name": "prompt_saida",
              "value": "=Voc√™ √© um PROFESSOR DE EDUCA√á√ÉO F√çSICA e PERSONAL TRAINER profissional brasileiro.\n\nResponda exclusivamente em portugu√™s formal, t√©cnico e impessoal.\nN√£o descreva racioc√≠nio interno, planejamento ou justificativas metodol√≥gicas.\n\nElabore um PLANO DE TREINO DE MUSCULA√á√ÉO PERSONALIZADO, utilizando as informa√ß√µes fornecidas, a base t√©cnica dispon√≠vel (RAG) e, quando necess√°rio, complementando com busca na WEB para exerc√≠cios, execu√ß√£o t√©cnica e recomenda√ß√µes de alimenta√ß√£o.\n\nESTRUTURA OBRIGAT√ìRIA DO DOCUMENTO:\n\n1. O documento DEVE iniciar, obrigatoriamente, com as INFORMA√á√ïES PESSOAIS DO USU√ÅRIO.\n\nDADOS DO USU√ÅRIO:\n- Nome: {{ $json[\"Nome\"] }}\n- Sexo: {{ $json[\"Sexo\"] }}\n- Idade: {{ $json[\"Idade\"] }} anos\n- Peso corporal: {{ $json[\"Peso\"] }} kg\n- Estatura: {{ $json[\"Altura\"] }} m\n- Frequ√™ncia semanal de treino: {{ $json[\"Dias\"] }} dias\n- Objetivo do treinamento: {{ $json[\"Objetivo\"] }}\n- Dicas: {{ $json[\"Dicas\"] }}\n\nDIRETRIZES T√âCNICAS OBRIGAT√ìRIAS:\n\n2. Ap√≥s os dados pessoais, apresente uma introdu√ß√£o t√©cnica detalhada, contextualizando o treinamento de muscula√ß√£o conforme o objetivo informado.\n\n3. Considere explicitamente o SEXO do usu√°rio na prescri√ß√£o do treino, ajustando:\n- volume total de treino;\n- intensidade relativa;\n- sele√ß√£o de exerc√≠cios;\n- intervalos de recupera√ß√£o;\nde acordo com princ√≠pios fisiol√≥gicos e biomec√¢nicos adequados.\n\n4. Utilize o campo \"Dicas\" como DIRETRIZ OBRIGAT√ìRIA de personaliza√ß√£o:\n- respeite exerc√≠cios, m√©todos ou est√≠mulos que o usu√°rio gosta ou n√£o gosta;\n- respeite restri√ß√µes informadas;\n- adapte treinos, alimenta√ß√£o e recomenda√ß√µes gerais √†s prefer√™ncias do usu√°rio.\n\n5. Estruture o plano contendo EXATAMENTE 12 TREINOS DISTINTOS.\nCADA TREINO CORRESPONDE A UM √öNICO DIA DE TREINO.\n\nOs 12 treinos devem ser distribu√≠dos ao longo de semanas, conforme a frequ√™ncia semanal informada:\n- 2 dias/semana: 6 semanas (2 treinos por semana √ó 6 semanas = 12 treinos)\n- 3 dias/semana: 4 semanas (3 treinos por semana √ó 4 semanas = 12 treinos)\n- 4 dias/semana: 3 semanas (4 treinos por semana √ó 3 semanas = 12 treinos)\n- 6 dias/semana: 2 semanas (6 treinos por semana √ó 2 semanas = 12 treinos)\n\n6. DISTRIBUI√á√ÉO DOS DIAS DA SEMANA (OBRIGAT√ìRIA):\n- Identifique explicitamente os dias da semana de treino;\n- Respeite os dias que o usu√°rio N√ÉO deseja treinar, conforme indicado nas Dicas;\n- N√ÉO organize treinos em dias consecutivos sem pausa adequada;\n- Garanta pelo menos 1 dia de descanso estrat√©gico na semana;\n- Caso o usu√°rio n√£o informe dias espec√≠ficos, distribua os treinos de forma equilibrada (ex.: segunda, quarta, sexta).\n\nESTRUTURA DE CADA TREINO (OBRIGAT√ìRIA):\n\n7. Cada treino deve conter:\n- Identifica√ß√£o clara da SEMANA e do DIA DE TREINO (ex.: Semana 1 ‚Äì Dia 1);\n- Nome do treino (ex.: ‚ÄúTreino A ‚Äì Peito e Tr√≠ceps‚Äù);\n- Divis√£o muscular detalhada;\n- De 4 a 6 exerc√≠cios por treino;\n- S√©ries e repeti√ß√µes espec√≠ficas;\n- Intervalos de descanso adequados ao objetivo;\n- Observa√ß√µes t√©cnicas quando necess√°rio (cad√™ncia, controle motor, postura).\n\n8. A prescri√ß√£o deve respeitar idade, sexo, peso, estatura e frequ√™ncia semanal, garantindo:\n- progress√£o adequada;\n- seguran√ßa articular e muscular;\n- coer√™ncia fisiol√≥gica;\n- aplicabilidade pr√°tica.\n\nORIENTA√á√ïES COMPLEMENTARES (SE√á√ÉO FINAL):\n\n9. Inclua uma se√ß√£o final contendo orienta√ß√µes t√©cnicas detalhadas sobre:\n- Aquecimento geral e espec√≠fico;\n- Alongamento e mobilidade;\n- Estrat√©gias de recupera√ß√£o muscular;\n- Recomenda√ß√µes gerais de estilo de vida e ades√£o ao treinamento;\n- Recomenda√ß√µes gerais de alimenta√ß√£o alinhadas ao objetivo, respeitando as Dicas do usu√°rio.\n\n10. Caso informa√ß√µes relevantes n√£o estejam dispon√≠veis na base t√©cnica (RAG), utilize a WEB como apoio para:\n- varia√ß√£o de exerc√≠cios;\n- execu√ß√£o correta dos movimentos;\n- recomenda√ß√µes alimentares gerais compat√≠veis com o objetivo.\n\nRESTRI√á√ïES:\n\n11. N√£o utilize refer√™ncias bibliogr√°ficas expl√≠citas.\n12. N√£o invente dados pessoais.\n13. N√£o descreva metodologia, racioc√≠nio interno ou planejamento.\n14. Retorne exclusivamente o PLANO FINAL.\n\nFORMATO DE APRESENTA√á√ÉO:\n\n- Utilize t√≠tulos e subt√≠tulos claros;\n- Organize os treinos por SEMANA e DIA DE TREINO;\n- Texto pronto para exporta√ß√£o em PDF.\n",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1072,
        432
      ],
      "id": "b30312a9-0198-429f-b5c6-2060efb20742",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "operation": "delete",
        "documentId": {
          "__rl": true,
          "value": "=https://docs.google.com/spreadsheets/d/1fNidbDtnVn5GCePQvDY9s_Mdr7fltNOj-u8Z2ytc2cs/edit?gid=1515466474#gid=1515466474",
          "mode": "url"
        },
        "sheetName": {
          "__rl": true,
          "value": 1515466474,
          "mode": "list",
          "cachedResultName": "Respostas ao formul√°rio 1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1fNidbDtnVn5GCePQvDY9s_Mdr7fltNOj-u8Z2ytc2cs/edit#gid=1515466474"
        },
        "startIndex": "={{ $('Limit1').item.json.row_number }}"
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        800,
        608
      ],
      "id": "e44b47da-1764-4aff-aa62-94a9c80908bb",
      "name": "Delete rows or columns from sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "e99KlxXhF4spbtXF",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "seconds"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1760,
        416
      ],
      "id": "2433c4cf-83fd-4826-ab88-055a300197dd",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "jsCode": "let texto = items[0].json.output;\n\n// Remove negrito Markdown (**)\ntexto = texto.replace(/\\*\\*/g, '');\n\n// Remove t√≠tulos Markdown (#, ##, ### etc)\ntexto = texto.replace(/^#{1,6}\\s*/gm, '');\n\nitems[0].json.output = texto;\n\nreturn items;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -560,
        352
      ],
      "id": "c89d0bb1-545e-4cd2-8b3c-07005738dd05",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 20
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1184,
        1360
      ],
      "id": "dd4ab7a5-1b70-4f60-9965-94d4b2c1929a",
      "name": "Schedule Trigger-RAG"
    }
  ],
  "pinData": {},
  "connections": {
    "Supabase Vector Store1": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings HuggingFace Inference": {
      "ai_embedding": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_embedding",
            "index": 0
          },
          {
            "node": "Supabase Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet1": {
      "main": [
        [
          {
            "node": "Limit1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit1": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Recursive Character Text Splitter1": {
      "ai_textSplitter": [
        [
          {
            "node": "Default Data Loader",
            "type": "ai_textSplitter",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "Delete a row": {
      "main": [
        []
      ]
    },
    "Groq Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update a document": {
      "main": [
        [
          {
            "node": "Download de pdf",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download de pdf": {
      "main": [
        [
          {
            "node": "Send a message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Copy file": {
      "main": [
        [
          {
            "node": "Update a document",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download file1": {
      "main": [
        [
          {
            "node": "Extract from File2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract from File2": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search files and folders1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [
          {
            "node": "Supabase Vector Store",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "set files1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "set files1": {
      "main": [
        [
          {
            "node": "Download file1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Delete a row",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send a message": {
      "main": [
        [
          {
            "node": "Delete rows or columns from sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Copy file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Schedule Trigger-RAG": {
      "main": [
        [
          {
            "node": "Search files and folders1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "e5757734-a8ab-4216-9edd-b83a500ab1e9",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "da54437c4273e1f84313bf661aaae35600769bb9a9756c648cc29ae3c174bc9b"
  },
  "id": "uQjAsEpC8Xfghv4B",
  "tags": []
}